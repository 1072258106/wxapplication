# JeeSite 企业信息化快速开发平台

微信点餐小程序后台

# 菜品分类管理
* 后台管理（curd）
* 微信小程序获取分类

# 菜品管理
* 后台管理（curd）
* 微信小程序获取商家推荐菜品
* 微信小程序根据分类id获取菜品

# 菜品评价管理（菜品id关联）
* 后台管理（curd）
* 微信小程序添加菜品评价
* 微信小程序根据菜品id分页获取菜品评价


# 订单管理
订单信息
* 后台管理（仅仅查看）
* 微信小程序创建订单

# 订单和菜品关联（创建订单时同步创建）
* 订单id和菜品id多对多 

# 微信支付
* 改变订单支付状态
* 流程详见微信官网图

# 后台统计
* 统计当日利润
* 统计当月利润

# 2018.7.11新增需求
## 后端新增桌号管理
* 表结构：桌号id,桌号名称，店铺id，二维码，创建时间，修改时间.
* 后端管理页面：大致是一个列表，后面有两个按钮，一个按钮是一键生成二维码，二维码中放入当前店铺id和桌号id。
第二个按钮是查看二维码，弹框显示一个二维码，右键保存图片。
* 下单新增桌号id，桌号名称（此处做冗余，不想连查库），order表新增桌号id。

前端改动：
扫码进入小程序，拿到店铺id和桌号id。
下单： 在之前基础上传入参数增加桌号id。
对接打印接口。

问题：
微信支付流程，客户下单在后台创建订单，此时订单是未支付状态，等待客户支付以后，微信会回调我的接口，
我在这个时候去更新订单为已支付。微信一共会回掉我好多次，具体看微信文档，直到我返回给他成功状态。

问题：依赖网络健壮性和后台健壮性，如果网络卡或者后台挂掉，订单会一直处于未支付状态，而用户已经支付过了。（当然这个问题，一般情况下不会发生）
对接打印接口：在什么时候发送信息给打印机，肯定是在订单支付成功之后，也就是在微信回掉我的时候。那么依然存在上述问题。