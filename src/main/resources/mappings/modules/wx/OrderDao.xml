<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thinkgem.jeesite.modules.wx.dao.OrderDao">

    <insert id="addOrder" >
        INSERT INTO wx_ordel(
            id,
            amount,
            state,
            customer_name,
            customer_wx_id,
            store_id,
            create_at,
            create_day,
            create_month,
            food_detail
        ) VALUES (
            #{id},
            #{amount},
            #{state},
            #{customerName},
            #{customerWxId},
            #{storeId},
            #{createAt},
            #{createDay},
            #{createMonth},
            #{foodDetail}
        )
    </insert>
    <update id="updateState">
        update wx_ordel
        set state = 'PAID'
        where id = #{id}
    </update>

    <select id="findOrderByWx_id" resultType="com.thinkgem.jeesite.modules.wx.entity.vo.OrderDetail">
        select *
        from wx_ordel
        where customer_wx_id = #{wxId}
        and store_id = #{storeId}
        order by create_at desc
        <if test="null != pageNo and null != pageSize">
            limit #{pageSize} offset #{pageNo}
        </if>
    </select>

    <select id="findById" resultType="com.thinkgem.jeesite.modules.wx.entity.vo.OrderDetail">
        select *
        from wx_ordel
        where id = #{orderId}
    </select>
</mapper>